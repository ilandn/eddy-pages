{"version":3,"sources":["../../webpack/universalModuleDefinition","../../webpack/bootstrap","events/consts.js","events/AnswerReceivedEvent.js","events/GameLoadedEvent.js","events/QuestionsCompleted.js","models/Answer.js","models/Question.js","sdk/EddySdk.js","events/EddyEventDispatcher.js","events/QuestionsReceivedEvent.js","index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","EVENTS_NAME","freeze","GAME_LOADED","ANSWER_RECEIVED","QUESTIONS_RECEIVED","QUESTIONS_COMPLETED","AnswerReceivedEvent","data","replyTime","_classCallCheck","this","answer","GameLoadedEvent","GameLoadedEvent_classCallCheck","QuestionsCompletedEvent","QuestionsCompleted_classCallCheck","Answer","body","isCorrect","Answer_classCallCheck","_isCorrect","_body","Question","json","Question_classCallCheck","_this","answers","map","correctAnswer","EddySdk","dispatcher","EddySdk_classCallCheck","questions","currentQuestionIndex","onNewQuestion","questionTime","dispatchEvent","Date","questionFalllback","length","id","EddyEventDispatcher","EddyEventDispatcher_classCallCheck","handleEddyPlatformEvents","addEventListener","newQuestionCallBack","event","self","top","objectToSend","JSON","parse","stringify","postMessage","console","debug","concat","q","callback","QuestionsReceivedEvent","QuestionsReceivedEvent_classCallCheck","instance","getSdkInstance","wrapper","gameLoaded","checkAnswer","getQuestion"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"eddy-sdk-web\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"eddy-sdk-web\"] = factory();\n\telse\n\t\troot[\"eddy-sdk-web\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","var EVENTS_NAME = Object.freeze({\n    GAME_LOADED: 'GAME_LOADED',\n    ANSWER_RECEIVED: 'ANSWER_RECEIVED',\n    QUESTIONS_RECEIVED: 'QUESTIONS_RECEIVED',\n    QUESTIONS_COMPLETED: 'QUESTIONS_COMPLETED'\n});\n\nexport var EDDY_ORIGIN = '*';\nexport default EVENTS_NAME;\n","import EVENTS_NAME from './consts';\n\nexport default class AnswerReceivedEvent {\n    constructor(data, replyTime) {\n        this.data = data;\n        this.replyTime = replyTime;\n    }\n    toJSON() {\n        return {\n            name: EVENTS_NAME.ANSWER_RECEIVED,\n            data: { answer: this.data, replyTime: this.replyTime }\n        };\n    }\n}\n","import EVENTS_NAME from './consts';\n\nexport default class GameLoadedEvent {\n    constructor(data) {\n        this.data = data;\n    }\n    toJSON() {\n        return {\n            name: EVENTS_NAME.GAME_LOADED,\n            data: this.data\n        };\n    }\n}\n","import EVENTS_NAME from './consts';\n\nexport default class QuestionsCompletedEvent {\n    constructor(data) {\n        this.data = data;\n    }\n    toJSON() {\n        return {\n            name: EVENTS_NAME.QUESTIONS_COMPLETED,\n            data: this.data\n        };\n    }\n}\n","export default class Answer {\n    constructor(body, isCorrect) {\n        this._isCorrect = isCorrect;\n        this._body = body;\n    }\n    isText() {\n        return true;\n    }\n    isAudio() {\n        return false;\n    }\n    isImage() {\n        return false;\n    }\n    text() {\n        return this._body;\n    }\n    isCorrect() {\n        return this._isCorrect;\n    }\n}\n","import Answer from './Answer';\n\nexport default class Question {\n    constructor(json) {\n        this.json = json;\n    }\n    isText() {\n        return true;\n    }\n    isAudio() {\n        return false;\n    }\n    isImage() {\n        return false;\n    }\n    text() {\n        return this.json.data.body;\n    }\n\n    answers() {\n        return this.json.data.answers.map(\n            answer =>\n                new Answer(answer, answer === this.json.data.correctAnswer)\n        );\n    }\n\n    toJSON() {\n        return this.json;\n    }\n}\n","import AnswerReceivedEvent from '../events/AnswerReceivedEvent';\nimport GameLoadedEvent from '../events/GameLoadedEvent';\nimport QuestionsCompletedEvent from '../events/QuestionsCompleted';\nimport Question from '../models/Question';\n\nexport default class EddySdk {\n    constructor(dispatcher) {\n        this.dispatcher = dispatcher;\n        this.questions = null;\n        this.currentQuestionIndex = 0;\n        this.dispatcher.onNewQuestion(questions => {\n            this.questions = questions;\n        });\n        this.questionTime = null;\n    }\n\n    gameLoaded(data) {\n        this.dispatcher.dispatchEvent(new GameLoadedEvent(data));\n    }\n\n    checkAnswer(answer) {\n        var replyTime = new Date() - this.questionTime;\n        this.dispatcher.dispatchEvent(\n            new AnswerReceivedEvent(answer, replyTime)\n        );\n        return answer.isCorrect();\n    }\n\n    getQuestion() {\n        this.questionTime = new Date();\n        if (this.questions === null) {\n            return this.questionFalllback();\n        }\n\n        if (this.questions.length > this.currentQuestionIndex)\n            return this.questions[this.currentQuestionIndex++];\n        else {\n            this.dispatcher.dispatchEvent(new QuestionsCompletedEvent({}));\n            return this.questions[0];\n        }\n    }\n\n    questionFalllback() {\n        return new Question({\n            id: -1,\n            data: {\n                answers: [1, 2, 3, 4],\n                body: '1 + 1 =',\n                correctAnswer: 2\n            }\n        });\n    }\n}\n","import EVENTS_NAME, { EDDY_ORIGIN } from './consts';\nimport Question from '../models/Question';\n\nexport default class EddyEventDispatcher {\n    constructor() {\n        this.handleEddyPlatformEvents = this.handleEddyPlatformEvents.bind(\n            this\n        );\n\n        window.addEventListener(\n            'message',\n            this.handleEddyPlatformEvents,\n            false\n        );\n        this.newQuestionCallBack = null;\n    }\n    dispatchEvent(event) {\n        if (window.self !== window.top) {\n            let objectToSend = JSON.parse(JSON.stringify(event));\n            window.top.postMessage(objectToSend, EDDY_ORIGIN);\n        }\n    }\n    handleEddyPlatformEvents(event) {\n        if (event.data && event.data.name) {\n            console.debug(\n                `Eddy platform event received ${JSON.stringify(\n                    event.data.name\n                )}`\n            );\n            switch (event.data.name) {\n                case EVENTS_NAME.QUESTIONS_RECEIVED:\n                    this.newQuestionCallBack(\n                        event.data.data.map(q => new Question(q))\n                    );\n                    break;\n                default: {\n                    console.debug(`Uknown event  ${JSON.stringify(event)}`);\n                }\n            }\n        }\n    }\n\n    onNewQuestion(callback) {\n        this.newQuestionCallBack = callback;\n    }\n}\n","import EVENTS_NAME from './consts';\n\nexport default class QuestionsReceivedEvent {\n    constructor(data) {\n        this.data = data;\n    }\n    toJSON() {\n        return {\n            name: EVENTS_NAME.QUESTIONS_RECEIVED,\n            data: this.data\n        };\n    }\n}\n","import EddySdk from './sdk/EddySdk';\nimport EddyEventDispatcher from './events/EddyEventDispatcher';\nimport EVENTS_NAME from './events/consts';\nimport QuestionsReceivedEvent from './events/QuestionsReceivedEvent';\nimport Question from './models/Question';\nimport Answer from './models/Answer';\n\nvar instance = null; //new EddySdk(new EddyEventDispatcher());\nfunction getSdkInstance() {\n    if (instance === null) instance = new EddySdk(new EddyEventDispatcher());\n    return instance;\n}\n\nclass EddySdkWrapper {\n    gameLoaded(data) {\n        return getSdkInstance().gameLoaded(data);\n    }\n\n    checkAnswer(answer) {\n        return getSdkInstance().checkAnswer(answer);\n    }\n\n    getQuestion() {\n        return getSdkInstance().getQuestion();\n    }\n}\n\nvar wrapper = new EddySdkWrapper();\n\nexport { wrapper as EddySdk };\n\nexport { EVENTS_NAME };\nexport { QuestionsReceivedEvent };\nexport { Question };\nexport { Answer };\n"],"sourceRoot":""}